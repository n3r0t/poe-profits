# Scripts

To run the scripts, you need to install the dependencies with:

```
poetry install --with bin
```

## `poe-wiki-gems.py`

This script pulls all gems from https://poegems.com/ and scrapes the [Path of Exile Wiki](https://www.poewiki.net/) for the experience required to level each gem to max and write the results to `output/gem_xp.json`.

### Usage

```
poetry run python bin/poe-wiki-gems.py
```

## `img-rec.py`

This script uses OpenCV to detect rerolls within the harvest menu and tracks the number of rerolls. It logs the current number of rerolls to stdout and writes the number of rerolls to `./data/img-rec/output-<target>.json`.

The script will need you to select the region of the screen where the rerolls are displayed first, and then the region of the screen where the harvest craft button is located. Select the region, then press `Enter` to confirm the first selection, select a new region, and press `Enter` to confirm the second selection. Then press `Esc` to close the selection window.

Exit the script by with `Ctrl-C` in the terminal.

### Usage

```
poetry run python bin/img-rec.py <targets>
```

Where `<targets>` is the directory containing the images to process match on.

Example using the [orbs](./data/img-rec/orbs) directory:

```
poetry run python bin/img-rec.py orbs
```

### Plotting

To plot the data generated by `img-rec.py`, run the following command:

```
python bin/data/img-rec/plot.py <data>
```

Where `<data>` is the path to the output file generated by `img-rec.py`.

Example:
```
python bin/data/img-rec/plot.py output-orbs.json
```